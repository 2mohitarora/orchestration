sudo apt-get update && sudo apt-get install -y wget gpg coreutils
wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg
echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list

sudo apt-get update && sudo apt-get install -y consul=1.17.3-1

========Consul Setup===============
sudo rm -f /etc/consul.d/consul.hcl /etc/consul.d/consul.env
sudo mkdir /etc/consul.d/ssl

Navigate to orchestration/vm_setup/consul/<APPROPRIATE_REGION_DIRECTORY>

-----------Server Setup-----------------------
sudo cp server.hcl /etc/consul.d/
sudo cp consul-agent-ca.pem /etc/consul.d/ssl
sudo cp server-consul-0-key.pem /etc/consul.d/ssl
sudo cp server-consul-0.pem /etc/consul.d/ssl
sudo cp consul.service /etc/systemd/system/consul.service
-----------Client Setup-----------------------
sudo cp client.hcl /etc/consul.d/
sudo cp consul-agent-ca.pem /etc/consul.d/ssl
sudo cp consul.service /etc/systemd/system/consul.service
========================================
//Validate
sudo consul validate /etc/consul.d/
sudo systemctl enable consul
sudo systemctl start consul
=======================
Join local consul cluster in the end 
=====================================
Federation
Step 1 - Bring up East Consul and Nomad
Step 2 - Finish creating the entire east cluster 
Step 3 - Install East Mesh gateway : nomad job run -address=http://198.19.249.80:4646 -region=east meshgateway.hcl 
Step 4 - Bring up West Consul and Nomad
Step 5 - Finish creating the entire west cluster 
Step 6 - Install West mesh gateway : nomad job run -address=http://198.19.249.196:4646 -region=west meshgateway.hcl
Step 7 - Test : consul members -wan from both east and west consul servers
Step 8 - From servers, curl localhost:8500/v1/catalog/services?dc=<>
Step 9 - Check if UI is working

(Pending step: Consul Servers WAN federation gossip should also go via Mesh Gateway, its either 1.8 feature or TLS is required)